<launch>
  <include file="$(find kobuki_softnode)/launch/full.launch"/>

  <node pkg="fake_localization" name="fake_localization" type="fake_localization">
    <remap from="base_pose_ground_truth" to="odom"/>
  </node>

  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find kobuki_softapps)/rviz/nav.rviz"/>

  <node pkg="nodelet" type="nodelet" name="diff_drive_pose_controller"
        args="load yocs_diff_drive_pose_controller/DiffDrivePoseControllerNodelet mobile_base_nodelet_manager">
    <param name="spin_rate" value="25"/>
    <param name="start_enabled" value="true"/>
    <param name="base_frame_name" value="base_footprint"/>
    <param name="goal_frame_name" value="base_goal_pose2"/>
    <param name="v_min" value="0.02"/>
    <param name="v_max" value="0.15"/>
    <param name="w_min" value="0.05"/>
    <param name="w_max" value="0.60"/>
    <param name="k_1" value="1.0"/>
    <param name="k_2" value="10.0"/>
    <param name="beta" value="0.1"/>
    <param name="lambda" value="1.0"/>
    <param name="dist_thres" value="0.01"/>
    <param name="orient_thres" value="0.06"/>
    <remap from="diff_drive_pose_controller/command_velocity" to="mobile_base/commands/velocity"/>
  </node>

<!--
  <node pkg="tf" type="static_transform_publisher" name="base_goal_pose_tf"
        args="1.0 0.0 0 1.57 0.0 0.0 base_goal_pose map 100"/>
-->

  <node pkg="tf" type="static_transform_publisher" name="base_goal_pose_tf2"
        args="1.0 0.0 0 3.14 0.0 0.0 base_goal_pose2 map 100"/>

</launch>
